{"version":3,"sources":["../src/index.js"],"names":["Discovery","require","Requester","Responder","Publisher","Subscriber","Sockend","Monitor","MonitoringTool","TimeBalancedRequester","PendingBalancedRequester","_","cote","options","defaults","environment","useHostNames","broadcast","multicast","environmentSettings","process","env","COTE_ENV","COTE_USE_HOST_NAMES","COTE_BROADCAST_ADDRESS","DOCKERCLOUD_IP_ADDRESS","undefined","COTE_MULTICAST_ADDRESS","setDefaults","components","forEach","component","setEnvironment","setUseHostNames","module","exports"],"mappings":";;AAAA,IAAMA,YAAYC,QAAQ,wBAAR,CAAlB;AACA,IAAMC,YAAYD,QAAQ,wBAAR,CAAlB;AACA,IAAME,YAAYF,QAAQ,wBAAR,CAAlB;AACA,IAAMG,YAAYH,QAAQ,wBAAR,CAAlB;AACA,IAAMI,aAAaJ,QAAQ,yBAAR,CAAnB;AACA,IAAMK,UAAUL,QAAQ,sBAAR,CAAhB;AACA,IAAMM,UAAUN,QAAQ,sBAAR,CAAhB;AACA,IAAMO,iBAAiBP,QAAQ,mBAAR,CAAvB;AACA,IAAMQ,wBAAwBR,QAAQ,sCAAR,CAA9B;AACA,IAAMS,2BAA2BT,QAAQ,yCAAR,CAAjC;;AAEA,IAAMU,IAAIV,QAAQ,QAAR,CAAV;;AAEA,IAAMW,OAAO,SAAPA,IAAO,CAACC,OAAD,EAAa;AACtBA,cAAUA,WAAW,EAArB;;AAEA,QAAMC,WAAW;AACbC,qBAAa,EADA;AAEbC,sBAAc,KAFD;AAGbC,mBAAW,IAHE;AAIbC,mBAAW;AAJE,KAAjB;;AAOA,QAAMC,sBAAsB;AACxBJ,qBAAaK,QAAQC,GAAR,CAAYC,QADD;AAExBN,sBAAc,CAAC,CAACI,QAAQC,GAAR,CAAYE,mBAFJ;AAGxBN,mBAAWG,QAAQC,GAAR,CAAYG,sBAAZ,KACVJ,QAAQC,GAAR,CAAYI,sBAAZ,GAAqC,cAArC,GAAsDC,SAD5C,CAHa;AAKxBR,mBAAWE,QAAQC,GAAR,CAAYM;AALC,KAA5B;;AAQAhB,MAAEG,QAAF,CAAWD,OAAX,EAAoBM,mBAApB,EAAyCL,QAAzC;;AAEAd,cAAU4B,WAAV,CAAsBf,OAAtB;;AAEA,QAAMgB,aAAa,CACf3B,SADe,EAEfC,SAFe,EAGfC,SAHe,EAIfC,UAJe,EAKfC,OALe,EAMfG,qBANe,EAOfC,wBAPe,CAAnB;;AAUAmB,eAAWC,OAAX,CAAmB,UAASC,SAAT,EAAoB;AACnCA,kBAAUC,cAAV,CAAyBnB,QAAQE,WAAjC;AACAgB,kBAAUE,eAAV,IACIF,UAAUE,eAAV,CAA0BpB,QAAQG,YAAlC,CADJ;AAEH,KAJD;;AAMA,WAAOJ,IAAP;AACH,CAvCD;;AAyCAA,KAAKV,SAAL,GAAiBA,SAAjB;AACAU,KAAKT,SAAL,GAAiBA,SAAjB;AACAS,KAAKR,SAAL,GAAiBA,SAAjB;AACAQ,KAAKP,UAAL,GAAkBA,UAAlB;AACAO,KAAKN,OAAL,GAAeA,OAAf;AACAM,KAAKL,OAAL,GAAeA,OAAf;AACAK,KAAKJ,cAAL,GAAsBA,cAAtB;AACAI,KAAKH,qBAAL,GAA6BA,qBAA7B;AACAG,KAAKF,wBAAL,GAAgCA,wBAAhC;;AAEAwB,OAAOC,OAAP,GAAiBvB,MAAjB","file":"index.js","sourcesContent":["const Discovery = require('./components/discovery');\nconst Requester = require('./components/requester');\nconst Responder = require('./components/responder');\nconst Publisher = require('./components/publisher');\nconst Subscriber = require('./components/subscriber');\nconst Sockend = require('./components/sockend');\nconst Monitor = require('./components/monitor');\nconst MonitoringTool = require('./monitoring-tool');\nconst TimeBalancedRequester = require('./components/time-balanced-requester');\nconst PendingBalancedRequester = require('./components/pending-balanced-requester');\n\nconst _ = require('lodash');\n\nconst cote = (options) => {\n    options = options || {};\n\n    const defaults = {\n        environment: '',\n        useHostNames: false,\n        broadcast: null,\n        multicast: null,\n    };\n\n    const environmentSettings = {\n        environment: process.env.COTE_ENV,\n        useHostNames: !!process.env.COTE_USE_HOST_NAMES,\n        broadcast: process.env.COTE_BROADCAST_ADDRESS ||\n        (process.env.DOCKERCLOUD_IP_ADDRESS ? '10.7.255.255' : undefined),\n        multicast: process.env.COTE_MULTICAST_ADDRESS,\n    };\n\n    _.defaults(options, environmentSettings, defaults);\n\n    Discovery.setDefaults(options);\n\n    const components = [\n        Requester,\n        Responder,\n        Publisher,\n        Subscriber,\n        Sockend,\n        TimeBalancedRequester,\n        PendingBalancedRequester,\n    ];\n\n    components.forEach(function(component) {\n        component.setEnvironment(options.environment);\n        component.setUseHostNames &&\n            component.setUseHostNames(options.useHostNames);\n    });\n\n    return cote;\n};\n\ncote.Requester = Requester;\ncote.Responder = Responder;\ncote.Publisher = Publisher;\ncote.Subscriber = Subscriber;\ncote.Sockend = Sockend;\ncote.Monitor = Monitor;\ncote.MonitoringTool = MonitoringTool;\ncote.TimeBalancedRequester = TimeBalancedRequester;\ncote.PendingBalancedRequester = PendingBalancedRequester;\n\nmodule.exports = cote();\n"]}